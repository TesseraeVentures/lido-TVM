{"ok":true,"jobId":"c04f50eb-c02c-45f2-a309-5fdd3f597113","tier":"demo","toolName":"ton_migrate_generate","adapterPath":"/opt/ton-dev-mcp/mcp/dist/server.js","response":{"success":true,"code":"import \"@stdlib/deploy\";\n\ncontract StakingVault with Deployable {\n    owner: Address;\n    stateVersion: Int;\n    pendingQueryId: Int;\n\n    init(owner: Address) {\n        self.owner = owner;\n        self.stateVersion = 1;\n        self.pendingQueryId = 0;\n    }\n\n    receive(\"upgrade\") {\n        require(sender() == self.owner, \"ERR_UNAUTHORIZED_UPGRADE\");\n        // TODO: set_code(newCodeCell); post-upgrade migrate()\n    }\n\n    receive(\"external_step\") {\n        // TODO: async state machine transition logic + bounce handling\n    }\n\n    get fun getStateVersion(): Int { return self.stateVersion; }\n}","language":"tact","warnings":["2 manual migration blocks detected; auto-repair plan generated."],"manualReviewRequired":["Review storage load/save layout and state versioning.","Confirm all upgrade paths are governance-protected.","Validate bounce handling and async retries for external interactions.","Run compile, audit, and equivalence gates after each patch iteration.","MB-003: Proxy-family upgrade flow must map to TVM set_code with governance guards.","MB-004: Modifier stack requires ordered inlining to preserve behavior."],"manualBlocks":[{"id":"MB-003","kind":"proxy-upgrade","reason":"Proxy-family upgrade flow must map to TVM set_code with governance guards.","snippet":"Beacon"},{"id":"MB-004","kind":"modifier-inline","reason":"Modifier stack requires ordered inlining to preserve behavior.","snippet":"modifier onlyOwner(){"}],"examples":{"before":"function upgradeTo(address newImpl) external onlyOwner { _upgradeTo(newImpl); }","after":"receive(\"upgrade\") { require(sender()==self.owner, \"ERR_UNAUTHORIZED_UPGRADE\"); /* set_code(newCode) */ }"}}}