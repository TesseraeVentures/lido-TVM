{
  "ok": true,
  "jobId": "aba17e7c-ec9f-4472-b06c-44e68592d3a8",
  "tier": "demo",
  "toolName": "ton_migrate_generate",
  "adapterPath": "/opt/ton-dev-mcp/mcp/dist/server.js",
  "response": {
    "success": true,
    "code": "import \"@stdlib/deploy\";\n\ncontract StakingVault with Deployable {\n    owner: Address;\n    stateVersion: Int;\n    pendingQueryId: Int;\n\n    init(owner: Address) {\n        self.owner = owner;\n        self.stateVersion = 1;\n        self.pendingQueryId = 0;\n    }\n\n    receive(\"upgrade\") {\n        require(sender() == self.owner, \"ERR_UNAUTHORIZED_UPGRADE\");\n        // TODO: set_code(newCodeCell); post-upgrade migrate()\n    }\n\n    receive(\"external_step\") {\n        // TODO: async state machine transition logic + bounce handling\n    }\n\n    get fun getStateVersion(): Int { return self.stateVersion; }\n}",
    "language": "tact",
    "warnings": [
      "1 manual migration blocks detected; auto-repair plan generated."
    ],
    "manualReviewRequired": [
      "Review storage load/save layout and state versioning.",
      "Confirm all upgrade paths are governance-protected.",
      "Validate bounce handling and async retries for external interactions.",
      "Run compile, audit, and equivalence gates after each patch iteration.",
      "MB-003: Proxy-family upgrade flow must map to TVM set_code with governance guards."
    ],
    "manualBlocks": [
      {
        "id": "MB-003",
        "kind": "proxy-upgrade",
        "reason": "Proxy-family upgrade flow must map to TVM set_code with governance guards.",
        "snippet": "Beacon"
      }
    ],
    "examples": {
      "before": "function upgradeTo(address newImpl) external onlyOwner { _upgradeTo(newImpl); }",
      "after": "receive(\"upgrade\") { require(sender()==self.owner, \"ERR_UNAUTHORIZED_UPGRADE\"); /* set_code(newCode) */ }"
    }
  }
}