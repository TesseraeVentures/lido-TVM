
> ton-stakingvault-migration@1.0.0 test
> npm run build && jest --runInBand


> ton-stakingvault-migration@1.0.0 build
> npx tact -c tact.config.json

ðŸ’¼ Compiling project staking_vault ...
   > StakingVault: tact compiler
   > StakingVault: func compiler
   > Packaging
   > StakingVault
   > Bindings
   > StakingVault
   > Reports
   > StakingVault
ðŸ’¼ Compiling project upgrade_controller ...
   > UpgradeController: tact compiler
   > UpgradeController: func compiler
   > Packaging
   > UpgradeController
   > Bindings
   > UpgradeController
   > Reports
   > UpgradeController
ðŸ’¼ Compiling project withdrawal_adapter_stub ...
   > WithdrawalAdapterStub: tact compiler
   > WithdrawalAdapterStub: func compiler
   > Packaging
   > WithdrawalAdapterStub
   > Bindings
   > WithdrawalAdapterStub
   > Reports
   > WithdrawalAdapterStub
PASS tests/stakingvault.test.ts
  StakingVault migration suite
    âœ“ owner fund/withdraw happy path (412 ms)
    âœ“ access control on owner-only messages (196 ms)
    âœ“ depositor-only deposit to beacon + pause/resume gating (312 ms)
    âœ“ trigger withdrawal sends to adapter and refunds excess (164 ms)
    âœ“ insufficient fee fails closed (136 ms)
    âœ“ bounce path refunds pending fee when adapter message bounces (async+bounce) (200 ms)
    âœ“ query replay is rejected (replay-protection invariant) (209 ms)
    âœ“ invalid args fail: zero validator count / zero keysCount (171 ms)
    âœ“ upgrade gating + ossify blocks further authorizations (upgrade/ossify) (185 ms)

Test Suites: 1 passed, 1 total
Tests:       9 passed, 9 total
Snapshots:   0 total
Time:        5.157 s
Ran all test suites.
